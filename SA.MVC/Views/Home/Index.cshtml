@model FrontPageDto
@{
    ViewData["Title"] = "Home Page";
    if (Model.UserHomeDto.RoleId == 1)
    {
        Layout = "_Layout";
    }
    else if (Model.UserHomeDto.RoleId == 2)
    {
        Layout = "_LayoutProfessor";
    }
}

<div class="text-center">
    <h1 class="display-4">Dobrodošli</h1>
    <p>Molimo vas odaberite željene mentore</a>.</p>
</div>

<div class="container h-100">
    <div class="row h-100 justify-content-between">
        <div class="col-md">
            <div class="card h-75">
                <div class="card-body h-100">
                    <h5 class="card-title">Ponuđeni mentori</h5>
                    <p class="card-text">Molimo vas odaberi točno <strong>pet</strong> mentora.</p>
                    <hr />
                    <div class="row overflow-auto" style="height:82%">
                        <ul class="list-group border-0" id="lst">
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md">
            <div class="card h-75">
                <div class="card-body h-100">
                    <h5 class="card-title">Odabrani mentori</h5>
                    <p class="card-text">Provjerite izbor, kasnije izmjene <strong>neće</strong> biti moguće.</p>
                    <hr />
                    <div class="row overflow-auto h-75">
                        <ul class="list-group border-0" id="odabir">
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@*<div class="container">
        <div class="row h-100 justify-content-center align-items-center text-center">
            <table>
                <tr>
                    <td>
                        <h1>Profesori</h1>
                    </td>
                    <td>
                        <h1>Odabir</h1>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div id="dvleft">
                            <ul id="lstproducts">
                            </ul>
                        </div>
                    </td>
                    <td>
                        <div id="dvright">
                            <ul id="lstselectedproducts"></ul>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <div class="row mt-5 justify-content-center align-items-center text-center">
            <button type="button" class="btn btn-primary text-center w-50">Spremi odabir</button>
        </div>
    </div>*@

@section Scripts
    {

    <script type="text/javascript">
        var el = [];

    //$(document).on("click", ".professor", function () {
    //    var clickedBtnID = $(this).attr('id'); // or var clickedBtnID = this.id

        $(document).ready(function () {

            loadData();

            function loadData() {
                var items = '';
                $.ajax({
                    url: '@Url.Action("GetProfessorsByCourse", "Users", new { id = @Model.UserHomeDto.Id})',
                    type: "GET",
                    success: function (resp) {
                        $.each(resp, function (idx, val) {

                            var footer = document.createElement("footer");
                            footer.className = "blockquote-footer";
                            footer.textContent = val.areaOfInterestOne + ', ' + val.areaOfInterestTwo + ', ' + val.areaOfInterestThree;

                            var liElement = document.createElement("li");
                            liElement.className = "list-group-item border-0";
                            liElement.id = val.id;
                            var aElement = document.createElement("a");
                            aElement.textContent = val.firstName + ' ' + val.lastName;
                            aElement.className = "btn btn-secondary professor";
                            aElement.href = "#";
                            liElement.appendChild(aElement);
                            liElement.appendChild(footer);
                            el.push(liElement);
                        });
                        $("#lst").html(el);
                        // fetcha sve buttone koji imaju klasu find-more
                        const buttonList = document.querySelectorAll('.list-group-item a');
                        // Dodati referencu na klik na svaki dohvaćeni "button"
                        for (let i = 0; i < buttonList.length; i++) {
                            const button = buttonList[i];
                            console.log(button);
                            // Referenca na funkciju "handleButtonClick" koja automatski šalje "event" parametar
                            button.addEventListener('click', handleButtonClick);
                        }
                    },
                    error: function (err) {
                        alert("Error! " + err.status);
                    }
                });
            };
        });

        function handleButtonClick(e)
        {
            //console.log(e.path[1].id);
            document.getElementById(e.path[1].id).remove();
        }
   

    </script>
}
